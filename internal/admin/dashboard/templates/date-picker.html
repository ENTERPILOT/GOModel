{{define "date-picker"}}
            <div class="date-picker" @click.outside="closeDatePicker()" @keydown.escape.window="closeDatePicker()">
            <button class="date-picker-trigger" @click="toggleDatePicker()">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M5 1v2M11 1v2M2 6h12M3 3h10a1 1 0 011 1v9a1 1 0 01-1 1H3a1 1 0 01-1-1V4a1 1 0 011-1z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span x-text="dateRangeLabel()">Last 30 days</span>
                <svg class="date-picker-chevron" :class="{ open: datePickerOpen }" width="12" height="12" viewBox="0 0 12 12" fill="none"><path d="M3 4.5l3 3 3-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </button>
            <div class="date-picker-dropdown" x-show="datePickerOpen" x-transition.opacity.duration.150ms>
                <div class="date-picker-presets">
                    <button class="preset-btn" :class="{ active: selectedPreset === '3' }" @click="selectPreset('3')">Last 3 days</button>
                    <button class="preset-btn" :class="{ active: selectedPreset === '7' }" @click="selectPreset('7')">Last 7 days</button>
                    <button class="preset-btn" :class="{ active: selectedPreset === '14' }" @click="selectPreset('14')">Last 14 days</button>
                    <button class="preset-btn" :class="{ active: selectedPreset === '30' }" @click="selectPreset('30')">Last 30 days</button>
                    <button class="preset-btn" :class="{ active: selectedPreset === '90' }" @click="selectPreset('90')">Last 90 days</button>
                </div>
                <div class="date-picker-calendars" @mousemove="onCalendarMouseMove($event)" @mouseleave="onCalendarMouseLeave()">
                    <!-- Left calendar (previous month) -->
                    <div class="dp-calendar">
                        <div class="dp-cal-header">
                            <button class="dp-nav-btn" @click="prevMonth()">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M8.5 3.5L5 7l3.5 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </button>
                            <span class="dp-cal-title" x-text="calendarTitle(-1)"></span>
                            <span></span>
                        </div>
                        <div class="dp-weekdays">
                            <span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span><span>Su</span>
                        </div>
                        <div class="dp-days">
                            <template x-for="day in calendarDays(-1)" :key="day.key">
                                <button class="dp-day"
                                    :class="{
                                        'other-month': !day.current,
                                        'today': isToday(day),
                                        'range-start': isRangeStart(day),
                                        'range-end': isRangeEnd(day),
                                        'in-range': isInRange(day),
                                        'disabled': isFutureDay(day)
                                    }"
                                    :disabled="isFutureDay(day) || !day.current"
                                    @click="selectCalendarDay(day)"
                                    x-text="day.day">
                                </button>
                            </template>
                        </div>
                    </div>
                    <!-- Right calendar (current month) -->
                    <div class="dp-calendar">
                        <div class="dp-cal-header">
                            <button class="dp-nav-btn dp-nav-prev-mobile" @click="prevMonth()">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M8.5 3.5L5 7l3.5 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </button>
                            <span class="dp-cal-title" x-text="calendarTitle(0)"></span>
                            <button class="dp-nav-btn" @click="nextMonth()" :disabled="isCurrentMonth()">
                                <svg width="14" height="14" viewBox="0 0 14 14" fill="none"><path d="M5.5 3.5L9 7l-3.5 3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </button>
                        </div>
                        <div class="dp-weekdays">
                            <span>Mo</span><span>Tu</span><span>We</span><span>Th</span><span>Fr</span><span>Sa</span><span>Su</span>
                        </div>
                        <div class="dp-days">
                            <template x-for="day in calendarDays(0)" :key="day.key">
                                <button class="dp-day"
                                    :class="{
                                        'other-month': !day.current,
                                        'today': isToday(day),
                                        'range-start': isRangeStart(day),
                                        'range-end': isRangeEnd(day),
                                        'in-range': isInRange(day),
                                        'disabled': isFutureDay(day)
                                    }"
                                    :disabled="isFutureDay(day) || !day.current"
                                    @click="selectCalendarDay(day)"
                                    x-text="day.day">
                                </button>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dp-cursor-hint" x-show="cursorHint.show" :style="'left:'+cursorHint.x+'px;top:'+cursorHint.y+'px'">
                <template x-if="selectingDate==='start'">
                    <svg viewBox="0 0 12 12" fill="none"><path d="M2 2v8M2 6h7M6.5 3.5L9 6 6.5 8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </template>
                <template x-if="selectingDate==='end'">
                    <svg viewBox="0 0 12 12" fill="none"><path d="M10 2v8M3 6h7M5.5 3.5L3 6l2.5 2.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
                </template>
                <span x-text="selectionHint()"></span>
            </div>
        </div>
{{end}}
