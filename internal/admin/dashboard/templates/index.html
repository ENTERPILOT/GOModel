{{define "index"}}
<!-- Overview Page -->
<div x-show="page==='overview'">
    <div class="page-header">
        <h2>Usage Overview</h2>
        <div class="period-select">
            <select x-model="days" @change="fetchUsage()">
                <option value="7">Last 7 days</option>
                <option value="14">Last 14 days</option>
                <option value="30" selected>Last 30 days</option>
                <option value="90">Last 90 days</option>
            </select>
        </div>
    </div>

    <!-- Auth Error Banner -->
    <div class="alert alert-warning" x-show="authError">
        Authentication required. Enter your API key in the sidebar to view data.
    </div>

    <!-- Summary Cards -->
    <div class="cards">
        <div class="card">
            <div class="card-label">Total Requests</div>
            <div class="card-value" x-text="formatNumber(summary.total_requests)">-</div>
        </div>
        <div class="card">
            <div class="card-label">Input Tokens</div>
            <div class="card-value" x-text="formatNumber(summary.total_input_tokens)">-</div>
        </div>
        <div class="card">
            <div class="card-label">Output Tokens</div>
            <div class="card-value" x-text="formatNumber(summary.total_output_tokens)">-</div>
        </div>
        <div class="card">
            <div class="card-label">Total Tokens</div>
            <div class="card-value" x-text="formatNumber(summary.total_tokens)">-</div>
        </div>
    </div>

    <!-- Usage Chart -->
    <div class="chart-container">
        <h3>Daily Token Usage</h3>
        <div class="chart-wrapper">
            <canvas id="usageChart"></canvas>
        </div>
        <p class="empty-state" x-show="daily.length === 0 && !loading && !authError">No usage data yet.</p>
    </div>
</div>

<!-- Models Page -->
<div x-show="page==='models'">
    <div class="page-header">
        <h2>Registered Models</h2>
        <div class="model-count" x-show="models.length > 0">
            <span x-text="modelFilter ? filteredModels.length + ' / ' + models.length : models.length"></span> models
        </div>
    </div>

    <!-- Auth Error Banner -->
    <div class="alert alert-warning" x-show="authError">
        Authentication required. Enter your API key in the sidebar to view data.
    </div>

    <!-- Filter -->
    <div class="table-toolbar" x-show="models.length > 0">
        <input type="text" placeholder="Filter by model, provider, or owner..." x-model="modelFilter" class="filter-input">
    </div>

    <!-- Models Table -->
    <div class="table-wrapper" x-show="models.length > 0">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Model ID</th>
                    <th>Provider</th>
                    <th>Owned By</th>
                </tr>
            </thead>
            <tbody>
                <template x-for="m in filteredModels" :key="m.model.id">
                    <tr>
                        <td class="mono" x-text="m.model.id"></td>
                        <td><span class="provider-badge" x-text="m.provider_type"></span></td>
                        <td x-text="m.model.owned_by || '-'"></td>
                    </tr>
                </template>
            </tbody>
        </table>
    </div>
    <p class="empty-state" x-show="models.length === 0 && !loading && !authError">No models registered.</p>
</div>
{{end}}
